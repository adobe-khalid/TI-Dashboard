<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Google Maps Example</title>
<style>
  /* Set the size of the map container */
  #map {
    height: 400px;
    width: 100%;
  }
</style>
</head>
<body>
<h1>My Google Map</h1>
<div id="map"></div> <!-- This is where the map will be rendered -->

<script>
// Load the Google Maps JavaScript API
function loadMapScript() {
    var script = document.createElement('script');
    script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyBz3r5qBJ3f7UiT28LKYJT4sjcORCVIQiw&callback=initMap';
    script.async = true;
    script.defer = true;
    document.head.appendChild(script);
}

// Initialize and add the map
function initMap() {
    // Create an array of city names
    var cities = ['\xcele-de-France','Bergen Region','Randstad','Republic of Ireland','Z\xfcrich','Madrid','\xc0rea Metropolitana de Barcelona','Warsaw','Copenhagen metropolitan area','Frankfurt Rhine-Main','Stockholm','Stuttgart','Milan','Toulouse M\xe9tropole','Brussels','Cambridge','Lausanne','Brabantine City','Rhine-Neckar','Lyon','Cologne','Romania','Alexandria metropolitan area, Louisiana','T\xfcbingen','Edinburgh','Cracow, Queensland','Aachen','Oxford','Manchester','Bristol','Ruhr Region','Hamburg','Leeds','Geneva','Valencia','Bordeaux','G\xf6ttingen','D\xfcsseldorf','Saarland','Lille','Armenia','Basel','Kaiserslautern','Marseille\xcele-de-France','London'];

    // The map, centered at the first city
    var map = new google.maps.Map(
        document.getElementById('map'), {
            zoom: 4, 
            center: {lat: 37.0902, lng: -95.7129}, // Center of USA
            styles: [{
                "elementType": "geometry",
                "stylers": [{"color": "#f5f5f5"}]
            }, {
                "elementType": "labels.icon",
                "stylers": [{"visibility": "off"}]
            }, {
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#616161"}]
            }, {
                "elementType": "labels.text.stroke",
                "stylers": [{"color": "#f5f5f5"}]
            }, {
                "featureType": "administrative.land_parcel",
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#bdbdbd"}]
            }, {
                "featureType": "poi",
                "elementType": "geometry",
                "stylers": [{"color": "#eeeeee"}]
            }, {
                "featureType": "poi",
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#757575"}]
            }, {
                "featureType": "poi.park",
                "elementType": "geometry",
                "stylers": [{"color": "#e5e5e5"}]
            }, {
                "featureType": "poi.park",
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#9e9e9e"}]
            }, {
                "featureType": "road",
                "elementType": "geometry",
                "stylers": [{"color": "#ffffff"}]
            }, {
                "featureType": "road.arterial",
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#757575"}]
            }, {
                "featureType": "road.highway",
                "elementType": "geometry",
                "stylers": [{"color": "#dadada"}]
            }, {
                "featureType": "road.highway",
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#616161"}]
            }, {
                "featureType": "road.local",
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#9e9e9e"}]
            }, {
                "featureType": "transit.line",
                "elementType": "geometry",
                "stylers": [{"color": "#e5e5e5"}]
            }, {
                "featureType": "transit.station",
                "elementType": "geometry",
                "stylers": [{"color": "#eeeeee"}]
            }, {
                "featureType": "water",
                "elementType": "geometry",
                "stylers": [{"color": "#c9c9c9"}]
            }, {
                "featureType": "water",
                "elementType": "labels.text.fill",
                "stylers": [{"color": "#9e9e9e"}]
            }]
        });

    // Loop through city names array and geocode them to get coordinates
    cities.forEach(function(cityName) {
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({ 'address': cityName }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var location = results[0].geometry.location;
                var marker = new google.maps.Marker({
                    position: location,
                    map: map,
                    title: cityName
                });
            } else {
                console.error('Geocode was not successful for the following reason: ' + status);
            }
        });
    });
}

// Load the map script when the page is loaded
window.onload = loadMapScript;
</script>
</body>
</html>
